## Принципы разработки
- KISS
- YAGNI
- Tell don't ask
- DRY
- Закон Деметры
  - Покупатель - Кассир - Кошелек - 100р

##  Coupling & Cohesion
- Coupling (связность)
  - Степень зависимости между компонентами
  - Компоненты: библиотека, программа, модуль, сервис, класс, метод, ...
  - Изменение в одном компоненте вызывает изменение в другом
    - Пример: аналоговая аудио система → цифровая
- Cohesion (сцепленность)
  - Насколько элементы внутри компонента зависят друг от друга
  - Собирайте вместе элементы, которые меняются вместе
  - Примеры:
    - Класс, который парсит даты и URL
    - Машина, которая стирает одежду и посуду
    - Класс, который парсит только пунктуацию URL, тоже не представляет собой цельную концепцию

## SOLID принципы
- Single Responsibility Principle
  - У каждого компонента должна быть только одна причина для изменения
  - Философия Unix: пишите программы, которые делают что-то одно и делают это хорошо
  - Любая попытка разделить компонент увеличит Coupling и ухудшит читаемость
- Open/Closed Principle
  - Структура модуля закрыта для изменения и открыта для расширения
  - Плагинная модель
    - Вступает в противоречие с YAGNI
  - Закрытость
    - Изменения в модуле не влияют на клиентов
  - Открытость
    - Легко добавлять новое поведение, встраиваясь в созданные абстракции
- Liskov Substitution Principle
  - Наследники должны соблюдать обещания, данные базовыми классами
  - Контрактное программирование Бертрана Мейера
    - Предусловия нельзя сужать
    - Постусловия нельзя расширять
    - Инварианты должны соблюдаться
  - Наследование — самая сильная связь (Coupling)
    - Предпочитайте наследованию композицию
- Interface Segregation Principle
  - Классы не должны зависеть от интерфейсов, которые они не используют
- Dependency Inversion Principle
  - Высокоуровневые модули не должны зависеть от низкоуровневых. Оба должны зависеть от абстракций
  - Абстракции не должны зависеть от деталей. Наоборот, детали должны зависеть от абстракций
 
##  Другие полезные принципы
- Принцип сбалансированных абстракций
  - На каждом уровне код должен придерживаться одинакового уровня абстракций
    - Инструкции в методе
    - Публичные классы метода
    - Классы в модуле
    - Модули / пространства имен внутри модуля
- Принцип наименьшего удивления (Принцип WTF)

## 4 элемента простого дизайна
1. Все тесты проходят
2. Минимальная дубликация
3. Максимальная понятность
4. Наименьшее число элементов

## Outside-In Development
- Фокус на выполнении бизнес ожиданий и создании удобного публичного интерфейса
- Лондонская и Чикагская школа TDD
- ATDD цикл
- Что выбрать?
  - Для начинающих классическое TDD проще, так как решения о дизайне принимаются позже, под влиянием тестов
  - Лондонская школа требует более высоких навыков дизайна, так как тесты не сигнализируют о плохом дизайне, но может быть более полезна для бизнеса
  - Классическая школа TDD может опираться на бизнес требования
- Проектирование удобного и поддерживаемого API через тесты, описывающие ожидания клиентов

## Упражнение. Два кубика
Реализуйте новые требования:
- Крупье может создать игру с двумя кубиками
- Игрок может делать ставки на числа от 2 до 12
- Казино определяет выигрышный коэффициент по вероятности выпадения того или иного номера:

|  2 |  3 |  4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 |
|----|----|----|---|---|---|---|---|----|----|----|
| 36 | 18 | 12 | 9 | 7 | 6 | 7 | 9 | 12 | 18 | 36 |
