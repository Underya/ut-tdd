# Transformation Proirity Premise

## Ценность TDD
- Вам нечего терять, кроме багов
- Минимизация отладки
  - TDD как практика проектирования
  - Снижение затрат на инкрементальную разработку
  - Быстрая обратная связь
- Дебаг - это стыдно, товарищи!
- Повышение поддерживаемости дизайна
  - Удобство API
- Тесты как документация
  - Предсказуемость поставки
  - Чистый работающий код
  - Управление страхом
      - Стресс -о-> Количество тестов -о-> Стресс
- Тесты как ограничение
  - Делаем только то, что нужно и не пишем то, что не нужно
- Постоянно работающий код
  - Движение маленькими шагами
  - Возможность остановиться в любой момент

## 3 способа сделать красный тест зеленым
1. Fake it
   - Очевидно
2. Очевидная реализация
3. Триангуляция
   - Просто: пишешь новый тест, который вынуждает добавить новое поведение и упростить дизайн

## TPP (Предпосылка о приоритете преобразований)

| #  | Преобразование               | Было                   | Стало                                 |
| -- | ---------------------------- | ---------------------- | ------------------------------------- |
|  1 | {} -> null                   | {}                     | return null                           |
|  2 | null -> constant             | return null            | return "1"                            |
|  3 | constant -> constant+        | return "1"             | return "1" + "2"                      |
|  4 | constant -> scalar           | return "1" + "2"       | return argument                       |
|  5 | scalar -> statements         | return argument        | return min(max(0, argument), 10)      |
|  6 | unconditional -> conditional | return argument        | if (condition) return 1 else return 0 |
|  7 | scalar -> array              | dog                    | [dog, cat]                            |
|  8 | array -> container           | [dog, cat]             | {dog=”DOG”, cat=”CAT}                 |
|  9 | statement -> tail recursion  | a + b                  | a + recursion                         |
| 10 | if -> loop                   | if (condition)         | loop (condition)                      |
| 11 | statement -> recursion       | a + recursion          | recursion                             |
| 12 | expression -> function       | today - birth          | CalculateBirthDate()                  |
| 13 | variable -> mutation         | day                    | var Day = 10; Day = 11;               |

- Преобразования, которые выше, предпочтительнее тех, которые ниже
- Пишите простой код, пока не возникнет дубликация
- Устраните дубликацию, выбрав более сложное преобразование, но не сложнее чем требуется

## Упражнение. Напишите тесты на вход и выход из игры
- Игрок может войти в игру
- Игрок может выйти из игры
- Игрок не может выйти из игры, если в нее не входил
- Игрок может играть только в одну игру одновременно
- Игра не позволяет войти более чем 6 игрокам
